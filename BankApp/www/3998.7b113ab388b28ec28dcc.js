(self.webpackChunkBankApp=self.webpackChunkBankApp||[]).push([[3998],{3998:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Tab1PageModule:()=>v});var i=n(5401),r=n(6274),o=n(4988),s=n(4315),a=n(3991),u=n(1855),c=n(5911),l=n(3059),d=n(4419),h=n(3606),g=n(7104),Z=n(5264);function p(t,e){1&t&&(h.TgZ(0,"ion-grid",11),h.TgZ(1,"ion-row"),h.TgZ(2,"ion-col",12),h._UZ(3,"ion-spinner",13),h.qZA(),h.qZA(),h.qZA())}function m(t,e){1&t&&(h.TgZ(0,"h3"),h._uU(1,"Cuenta/s de Ahorro"),h.qZA())}function f(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"ion-card"),h.TgZ(1,"ion-card-header"),h.TgZ(2,"ion-card-title"),h._uU(3),h.qZA(),h.qZA(),h.TgZ(4,"ion-card-content"),h.TgZ(5,"p",14),h._uU(6),h.qZA(),h.TgZ(7,"ion-item-group",15),h.TgZ(8,"ion-label"),h._uU(9),h.qZA(),h.qZA(),h.TgZ(10,"ion-buttons",16),h.TgZ(11,"ion-button",2),h.NdJ("click",function(){const e=h.CHM(t).$implicit;return h.oxw(3).transferir(e.numeroCuenta)}),h._UZ(12,"ion-icon",17),h._uU(13," Transferir "),h.qZA(),h.TgZ(14,"ion-button",2),h.NdJ("click",function(){const e=h.CHM(t).$implicit;return h.oxw(3).historial(e)}),h._UZ(15,"ion-icon",18),h._uU(16," Historial "),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=e.$implicit;h.xp6(3),h.Oqu(t.numeroCuenta),h.xp6(3),h.Oqu(t.estado),h.xp6(3),h.hij(" Q ",t.saldo,"")}}function A(t,e){if(1&t&&(h.TgZ(0,"ion-list"),h.YNc(1,f,17,3,"ion-card",19),h.qZA()),2&t){const t=h.oxw(2);h.xp6(1),h.Q6J("ngForOf",t.cuentas)}}function T(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"h3"),h._uU(2,"Cuenta Monetaria"),h.qZA(),h.TgZ(3,"ion-card"),h.TgZ(4,"ion-card-header"),h.TgZ(5,"ion-card-subtitle"),h._uU(6),h.qZA(),h.TgZ(7,"ion-card-title"),h._uU(8),h.qZA(),h.qZA(),h.TgZ(9,"ion-card-content"),h.TgZ(10,"p",14),h._uU(11),h.qZA(),h.TgZ(12,"ion-item-group",15),h.TgZ(13,"ion-label"),h._uU(14),h.qZA(),h.qZA(),h.TgZ(15,"ion-buttons",16),h.TgZ(16,"ion-button",2),h.NdJ("click",function(){h.CHM(t);const e=h.oxw();return e.transferir(e.cuentaMonetaria.numeroCuenta)}),h._UZ(17,"ion-icon",17),h._uU(18," Transferir "),h.qZA(),h.TgZ(19,"ion-button",2),h.NdJ("click",function(){h.CHM(t);const e=h.oxw();return e.historial(e.cuentaMonetaria)}),h._UZ(20,"ion-icon",18),h._uU(21," Historial "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(22,m,2,0,"h3",10),h.YNc(23,A,2,1,"ion-list",10),h.qZA()}if(2&t){const t=h.oxw();h.xp6(6),h.Oqu(t.cuentaMonetaria.usuario),h.xp6(2),h.Oqu(t.cuentaMonetaria.numeroCuenta),h.xp6(3),h.Oqu(t.cuentaMonetaria.estado),h.xp6(3),h.hij(" Q ",t.cuentaMonetaria.saldo,""),h.xp6(8),h.Q6J("ngIf",0!==t.cuentas.length),h.xp6(1),h.Q6J("ngIf",0!==t.cuentas.length)}}const U=[{path:"",component:(()=>{class t{constructor(t,e,n,i,r,o){this.router=t,this.db=e,this.storage=n,this.modalController=i,this.toastController=r,this.alertController=o,this.cuentaMonetaria={numeroCuenta:"",usuario:"",saldo:0,estado:"activa",tipo:""},this.cuentas=[],this.cuentasUsuario=[],this.cuentasFavoritas=[],this.currentUser={usuario:void 0,isAdmin:!1},this.bubbles=!0,this.init()}cerrarSesion(){this.presentAlertConfirm()}transferir(t){this.getAccounts(),this.mostrarModalCreateTrans(this.currentUser.usuario,this.cuentasUsuario,this.cuentasFavoritas,t)}getAccounts(){this.cuentasUsuario=this.cuentas.map(t=>t),this.cuentasUsuario.push(this.cuentaMonetaria)}historial(t){this.db.getAccountTrans(t.numeroCuenta).then(e=>{this.mostrarModalTransaccion(e.data.trans,t.numeroCuenta,!1,!0)})}ionViewWillEnter(){return(0,u.mG)(this,void 0,void 0,function*(){this.currentUser=yield this.storage.getCurrentUser(),void 0===this.currentUser.usuario?(yield this.presentToast("Sesion expirada","danger"),this.router.navigate(["/"])):this.init()})}init(){return(0,u.mG)(this,void 0,void 0,function*(){yield this.getcurrentUser(),void 0!==this.user&&(yield this.getpersonalAccounts()),this.bubbles=!1})}doRefresh(t){setTimeout(()=>(0,u.mG)(this,void 0,void 0,function*(){yield this.getcurrentUser(),void 0!==this.user&&(yield this.getpersonalAccounts()),this.bubbles=!1,t.target.complete()}),1500)}getpersonalAccounts(){return(0,u.mG)(this,void 0,void 0,function*(){yield this.db.getMonetary(this.user.usuario).then(t=>{this.cuentaMonetaria=t.data}),yield this.db.getUserAccounts(this.user.usuario).then(t=>{this.cuentas=t.data.cuentas}),this.db.getUserFavorites(this.user.usuario).then(t=>{this.cuentasFavoritas=t.data.cuentas})})}getcurrentUser(){return(0,u.mG)(this,void 0,void 0,function*(){yield this.db.getUsers().then(t=>{this.users=t.data.usuarios}),this.user=this.users.filter(t=>t.usuario===this.currentUser.usuario)[0]})}mostrarModalUsuario(t){return(0,u.mG)(this,void 0,void 0,function*(){yield this.getcurrentUser();const e=yield this.modalController.create({component:c.g,componentProps:{user:t}});yield e.present(),e.onWillDismiss()})}mostrarModalTransaccion(t,e,n,i){return(0,u.mG)(this,void 0,void 0,function*(){const r=yield this.modalController.create({component:l.f,componentProps:{transferencias:t,cuenta:e,isAdmin:n,menu:i}});yield r.present(),r.onWillDismiss()})}mostrarModalCreateTrans(t,e,n,i){return(0,u.mG)(this,void 0,void 0,function*(){const r=yield this.modalController.create({component:d.t,componentProps:{user:t,cuentasUsuario:e,cuentasFav:n,numeroCuentaDest:i}});yield r.present(),r.onWillDismiss()})}presentAlertConfirm(){return(0,u.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"",message:"Deseas cerrar sesion",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Aceptar",handler:()=>{this.currentUser={usuario:void 0,isAdmin:!1},this.storage.guardarCurrentUser(this.currentUser),this.router.navigate(["/"])}}]});yield t.present()})}presentToast(t,e){return(0,u.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({cssClass:"center",message:t,duration:500,color:e})).present()})}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(a.F0),h.Y36(g.t),h.Y36(Z.q),h.Y36(i.IN),h.Y36(i.yF),h.Y36(i.Br))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-tab1"]],decls:14,vars:4,consts:[[3,"translucent"],["slot","end"],[3,"click"],["slot","start","name","cog-outline"],["color","danger",3,"click"],["name","exit-outline"],[1,"ion-padding",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Actualizar","refreshingSpinner","circles","refreshingText","Actualizando..."],["fixed","",4,"ngIf"],[4,"ngIf"],["fixed",""],[1,"ion-text-center"],["color","primary","name","bubbles"],["capitalize",""],[1,"flex"],[1,"space-between"],["slot","start","name","reader-outline"],["slot","start","name","compass-outline"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(h.TgZ(0,"ion-header",0),h.TgZ(1,"ion-toolbar"),h.TgZ(2,"ion-title"),h._uU(3," Mi cuenta "),h.qZA(),h.TgZ(4,"ion-buttons",1),h.TgZ(5,"ion-button",2),h.NdJ("click",function(){return e.mostrarModalUsuario(e.user)}),h._UZ(6,"ion-icon",3),h.qZA(),h.TgZ(7,"ion-button",4),h.NdJ("click",function(){return e.cerrarSesion()}),h._UZ(8,"ion-icon",5),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(9,"ion-content",6),h.TgZ(10,"ion-refresher",7),h.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),h._UZ(11,"ion-refresher-content",8),h.qZA(),h.YNc(12,p,4,0,"ion-grid",9),h.YNc(13,T,24,6,"div",10),h.qZA()),2&t&&(h.Q6J("translucent",!0),h.xp6(9),h.Q6J("fullscreen",!0),h.xp6(3),h.Q6J("ngIf",e.bubbles),h.xp6(1),h.Q6J("ngIf",!e.bubbles))},directives:[i.Gu,i.sr,i.wd,i.Sm,i.YG,i.gu,i.W2,i.nJ,i.Wo,r.O5,i.jY,i.Nd,i.wI,i.PQ,i.PM,i.Zi,i.tO,i.gZ,i.FN,i.Ub,i.Q$,i.q_,r.sg],styles:[""]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[a.Bz.forChild(U)],a.Bz]}),t})();var q=n(9258);let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[i.Pc,r.ez,o.u5,s.e,b,q.K]]}),t})()}}]);